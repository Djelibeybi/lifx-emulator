import{W as u,X as c,Y as o,w as t,Z as p}from"./BOE2s64r.js";const i={uptime_seconds:0,start_time:0,device_count:0,packets_received:0,packets_sent:0,packets_received_by_type:{},packets_sent_by_type:{},error_count:0,activity_enabled:!1};function S(){let e=u(c({...i}));return{get value(){return t(e)},set(r){o(e,r,!0)},reset(){o(e,{...i},!0)}}}const k=S();function w(){let e=u(c(new Map));return{get map(){return t(e)},get list(){return[...t(e).values()]},get count(){return t(e).size},get(r){return t(e).get(r)},set(r){const s=new Map;for(const a of r)s.set(a.serial,a);o(e,s,!0)},add(r){o(e,new Map(t(e)),!0),t(e).set(r.serial,r)},remove(r){o(e,new Map(t(e)),!0),t(e).delete(r)},update(r,s){const a=t(e).get(r);a&&(o(e,new Map(t(e)),!0),t(e).set(r,{...a,...s}))},clear(){o(e,new Map,!0)}}}const I=w();function y(){let e=u(c([]));return{get list(){return t(e)},get count(){return t(e).length},set(r){o(e,r.slice(-100),!0)},add(r){o(e,[...t(e),r].slice(-100),!0)},clear(){o(e,[],!0)},get reversed(){return[...t(e)].reverse()}}}const A=y(),l="lifx-emulator-view",f="lifx-emulator-page-size",g="lifx-emulator-expanded";function h(){return typeof localStorage>"u"?"card":localStorage.getItem(l)==="table"?"table":"card"}function _(){if(typeof localStorage>"u")return 20;const e=localStorage.getItem(f),r=e?parseInt(e,10):20;return[10,20,50,100].includes(r)?r:20}function v(){if(typeof localStorage>"u")return{zones:new Set,metadata:new Set};try{const e=localStorage.getItem(g);if(!e)return{zones:new Set,metadata:new Set};const r=JSON.parse(e);return{zones:new Set(r.zones||[]),metadata:new Set(r.metadata||[])}}catch{return{zones:new Set,metadata:new Set}}}function E(){let e=u(c(h())),r=u(c(_())),s=u(1),a=u(c(v()));function d(){typeof localStorage<"u"&&localStorage.setItem(g,JSON.stringify({zones:[...t(a).zones],metadata:[...t(a).metadata]}))}return{get viewMode(){return t(e)},get pageSize(){return t(r)},get currentPage(){return t(s)},get expanded(){return t(a)},setViewMode(n){o(e,n,!0),typeof localStorage<"u"&&localStorage.setItem(l,n)},setPageSize(n){o(r,n,!0),o(s,1),typeof localStorage<"u"&&localStorage.setItem(f,String(n))},setCurrentPage(n){o(s,n,!0)},toggleZonesExpanded(n){t(a).zones.has(n)?t(a).zones.delete(n):t(a).zones.add(n),o(a,{...t(a)},!0),d()},toggleMetadataExpanded(n){t(a).metadata.has(n)?t(a).metadata.delete(n):t(a).metadata.add(n),o(a,{...t(a)},!0),d()},isZonesExpanded(n){return t(a).zones.has(n)},isMetadataExpanded(n){return t(a).metadata.has(n)}}}const T=E(),m="lifx-emulator-theme";function x(){if(typeof localStorage>"u")return"system";const e=localStorage.getItem(m);return e==="light"||e==="dark"||e==="system"?e:"system"}function z(){let e=u(c(x())),r=u(c(typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!0));const s=p(()=>t(e)==="system"?t(r)?"dark":"light":t(e));function a(){typeof document<"u"&&document.documentElement.setAttribute("data-theme",t(s))}return typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d=>{o(r,d.matches,!0)}),{get mode(){return t(e)},get effective(){return t(s)},applyTheme:a,set(d){o(e,d,!0),typeof localStorage<"u"&&localStorage.setItem(m,d),a()},toggle(){const d=t(e)==="light"?"dark":t(e)==="dark"?"system":"light";this.set(d)}}}const P=z();export{A as a,I as d,k as s,P as t,T as u};
